<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>God's Plan | Operations Hub</title>
    
    <!-- LIBRERIAS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace']
                    },
                    colors: { 
                        brand: { DEFAULT: '#E70000', hover: '#cc0000', glow: 'rgba(231,0,0,0.5)' }, 
                        dark: '#050505',
                        card: '#121212'
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #050505; color: white; overflow-x: hidden; }
        
        /* Grid T谩ctico */
        .bg-grid {
            position: fixed; inset: 0; z-index: -1;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            mask-image: radial-gradient(circle at center, black 40%, transparent 100%);
        }
        .glow-spot {
            position: fixed; width: 600px; height: 600px; background: radial-gradient(circle, rgba(231,0,0,0.08) 0%, transparent 70%);
            top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: -1;
        }

        /* Tarjeta de Herramienta */
        .tool-card {
            background: rgba(18, 18, 18, 0.6); backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative; overflow: hidden;
        }
        .tool-card:hover {
            border-color: #E70000; transform: translateY(-4px);
            background: rgba(25, 25, 25, 0.8);
            box-shadow: 0 15px 30px -10px rgba(231,0,0,0.15);
        }
        .tool-card::before {
            content: ''; position: absolute; inset: 0;
            background: radial-gradient(400px circle at var(--x) var(--y), rgba(255,255,255,0.05), transparent 40%);
            opacity: 0; transition: opacity 0.3s; pointer-events: none;
        }
        .tool-card:hover::before { opacity: 1; }

        /* Status Dot */
        .status-dot {
            width: 6px; height: 6px; background: #10b981; border-radius: 50%;
            box-shadow: 0 0 8px #10b981; animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body class="min-h-screen flex flex-col p-4 md:p-8">

    <div class="bg-grid"></div>
    <div class="glow-spot"></div>

    <!-- HEADER OPERATIVO -->
    <header class="flex justify-between items-end mb-10 pb-6 border-b border-white/5 relative z-10">
        <div class="flex items-center gap-4">
            <a href="/" class="w-10 h-10 bg-white/5 border border-white/10 flex items-center justify-center rounded-xl hover:bg-brand hover:text-white transition-all group">
                <i class="ph-bold ph-house text-lg group-hover:scale-110 transition-transform"></i>
            </a>
            <div>
                <h1 class="text-3xl font-black tracking-tighter flex items-center gap-2">
                    CORPODATOS <span class="text-[10px] bg-brand/10 border border-brand/20 px-2 py-0.5 rounded text-brand font-mono tracking-widest align-middle">HUB</span>
                </h1>
                <p class="text-xs text-zinc-500 font-mono tracking-widest uppercase mt-1">Sistema de Gesti贸n Operativa</p>
            </div>
        </div>
        
        <div class="flex items-center gap-3">
            <div id="user-badge" class="hidden md:flex items-center gap-2 px-3 py-1.5 bg-black/40 rounded-full border border-white/5 backdrop-blur-sm">
                <div class="status-dot"></div>
                <span id="user-name" class="text-[10px] font-bold text-zinc-400 uppercase tracking-wider">Cargando...</span>
            </div>
        </div>
    </header>

    <!-- GRID DE HERRAMIENTAS -->
    <main class="flex-grow grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto w-full relative z-10">

        <!-- 1. ADHERENCIA -->
        <a href="adherencia.html" class="tool-card rounded-2xl p-6 group flex flex-col justify-between h-48" onmousemove="updateGlow(event, this)">
            <div class="flex justify-between items-start">
                <div class="w-12 h-12 bg-blue-500/10 rounded-xl flex items-center justify-center text-blue-500 group-hover:text-white group-hover:bg-blue-600 transition-colors border border-blue-500/20 group-hover:border-blue-500">
                    <i class="ph-fill ph-clock text-2xl"></i>
                </div>
                <i class="ph-bold ph-arrow-right text-zinc-700 group-hover:text-white transition-colors"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold mb-1 group-hover:text-blue-400 transition-colors">Adherencia</h3>
                <p class="text-[10px] text-zinc-500 font-bold uppercase tracking-wider">Control de Horarios & Asistencia</p>
            </div>
        </a>
        <!-- 2. FINANZAS (NUEVO) -->
        <a href="/corpo/finanzas.html" class="tool-card rounded-2xl p-6 group flex flex-col justify-between h-48" onmousemove="updateGlow(event, this)">
            <div class="flex justify-between items-start">
                <!-- Color Verde Esmeralda -->
                <div class="w-12 h-12 bg-emerald-500/10 rounded-xl flex items-center justify-center text-emerald-500 group-hover:text-white group-hover:bg-emerald-600 transition-colors border border-emerald-500/20 group-hover:border-emerald-500">
                    <i class="ph-fill ph-currency-dollar text-2xl"></i>
                </div>
                <i class="ph-bold ph-arrow-right text-zinc-700 group-hover:text-white transition-colors"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold mb-1 group-hover:text-emerald-400 transition-colors">Finanzas</h3>
                <p class="text-[10px] text-zinc-500 font-bold uppercase tracking-wider">Control Financiero & KPIs</p>
            </div>
        </a>

        <!-- 3. CHAT INTERNO -->
        <a href="chat.html" class="tool-card rounded-2xl p-6 group flex flex-col justify-between h-48" onmousemove="updateGlow(event, this)">
            <div class="flex justify-between items-start">
                <div class="w-12 h-12 bg-purple-500/10 rounded-xl flex items-center justify-center text-purple-500 group-hover:text-white group-hover:bg-purple-600 transition-colors border border-purple-500/20 group-hover:border-purple-500">
                    <i class="ph-fill ph-chats-circle text-2xl"></i>
                </div>
                <i class="ph-bold ph-arrow-right text-zinc-700 group-hover:text-white transition-colors"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold mb-1 group-hover:text-purple-400 transition-colors">Comunicaciones</h3>
                <p class="text-[10px] text-zinc-500 font-bold uppercase tracking-wider">Chat Encriptado & Avisos</p>
            </div>
        </a>

        <!-- 4. CASOS (TICKETS) -->
        <a href="casos.html" class="tool-card rounded-2xl p-6 group flex flex-col justify-between h-48" onmousemove="updateGlow(event, this)">
            <div class="flex justify-between items-start">
                <div class="w-12 h-12 bg-orange-500/10 rounded-xl flex items-center justify-center text-orange-500 group-hover:text-white group-hover:bg-orange-600 transition-colors border border-orange-500/20 group-hover:border-orange-500">
                    <i class="ph-fill ph-strategy text-2xl"></i>
                </div>
                <i class="ph-bold ph-arrow-right text-zinc-700 group-hover:text-white transition-colors"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold mb-1 group-hover:text-orange-400 transition-colors">Gesti贸n de Casos</h3>
                <p class="text-[10px] text-zinc-500 font-bold uppercase tracking-wider">Tickets & Seguimiento</p>
            </div>
        </a>

        <!-- 5. MI CUENTA -->
        <a href="cuenta.html" class="tool-card rounded-2xl p-6 group flex flex-col justify-between h-48" onmousemove="updateGlow(event, this)">
            <div class="flex justify-between items-start">
                <div class="w-12 h-12 bg-zinc-800 rounded-xl flex items-center justify-center text-zinc-400 group-hover:text-white group-hover:bg-zinc-700 transition-colors border border-zinc-700 group-hover:border-zinc-600">
                    <i class="ph-fill ph-user-gear text-2xl"></i>
                </div>
                <i class="ph-bold ph-arrow-right text-zinc-700 group-hover:text-white transition-colors"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold mb-1 group-hover:text-white transition-colors">Perfil de Agente</h3>
                <p class="text-[10px] text-zinc-500 font-bold uppercase tracking-wider">Configuraci贸n & Seguridad</p>
            </div>
        </a>

        <!-- 6. GUA / DOCS -->
        <a href="guia.html" class="tool-card rounded-2xl p-6 group flex flex-col justify-between h-48 opacity-60 hover:opacity-100 transition-opacity" onmousemove="updateGlow(event, this)">
            <div class="flex justify-between items-start">
                <div class="w-12 h-12 bg-transparent border border-white/10 rounded-xl flex items-center justify-center text-zinc-500 group-hover:text-white group-hover:border-white/30 transition-colors">
                    <i class="ph-bold ph-book-bookmark text-2xl"></i>
                </div>
                <i class="ph-bold ph-arrow-right text-zinc-700 group-hover:text-white transition-colors"></i>
            </div>
            <div>
                <h3 class="text-xl font-bold mb-1 group-hover:text-white transition-colors">Base de Conocimiento</h3>
                <p class="text-[10px] text-zinc-500 font-bold uppercase tracking-wider">Manuales & Protocolos</p>
            </div>
        </a>

    </main>

    <footer class="mt-12 pt-6 border-t border-white/5 text-center relative z-10">
        <p class="text-[10px] text-zinc-600 font-mono uppercase tracking-[0.2em]">God's Plan Ecosystem v2.0</p>
    </footer>

    <!-- LOGICA FIREBASE Y PERSISTENCIA -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        // CONFIGURACIN (GODSPLAN BLQA)
        const firebaseConfig = {
            apiKey: "AIzaSyD0lX3XmVPQHNNxpsZS82YzDMzM6MLhq3g",
            authDomain: "godsplan-blqa.firebaseapp.com",
            projectId: "godsplan-blqa",
            storageBucket: "godsplan-blqa.firebasestorage.app",
            messagingSenderId: "1008783768310",
            appId: "1:1008783768310:web:c09fe541a2f4d23e5b8ad7"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        //  LA CLAVE MGICA: ACTIVAR PERSISTENCIA LOCAL 
        // Esto evita que te saque al cambiar de p谩gina en el cel
        setPersistence(auth, browserLocalPersistence).catch(console.error);

        onAuthStateChanged(auth, (user) => {
            if (user) {
                // Hay sesi贸n activa
                const name = user.displayName || user.email?.split('@')[0] || "Agente";
                document.getElementById('user-name').textContent = name;
                document.getElementById('user-badge').classList.remove('hidden');
                document.getElementById('user-badge').classList.add('flex');
            } else {
                // No hay sesi贸n, redirigir al login
                window.location.href = '/'; 
            }
        });

        // Efecto Glow
        window.updateGlow = function(e, card) {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            card.style.setProperty('--x', `${x}px`);
            card.style.setProperty('--y', `${y}px`);
        }
    </script>
</body>
</html>
