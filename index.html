<!DOCTYPE html>
<html lang="es" class="antialiased">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Personal Operating System">
    <meta name="theme-color" content="#000000">
    <title>GOD'S PLAN</title>

    <!-- FAVICON -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'></text></svg>">

    <!-- LIBRERAS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                        mono: ['"JetBrains Mono"', 'monospace'],
                    },
                    colors: {
                        brand: { DEFAULT: '#FF2A2A', hover: '#D90000', glow: 'rgba(255, 42, 42, 0.5)' },
                        bg: { main: '#030303', surface: '#0D0D0D', glass: 'rgba(20, 20, 20, 0.6)' },
                        border: { DEFAULT: 'rgba(255,255,255,0.08)', hover: 'rgba(255,255,255,0.15)' },
                    },
                    backgroundImage: {
                        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
                        'mesh': 'radial-gradient(circle at 50% -20%, rgba(255, 42, 42, 0.15), transparent 70%)'
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'pulse-glow': 'pulseGlow 4s ease-in-out infinite',
                        'spin-slow': 'spin 3s linear infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px) scale(0.98)' },
                            '100%': { opacity: '1', transform: 'translateY(0) scale(1)' }
                        },
                        pulseGlow: {
                            '0%, 100%': { opacity: '0.4' },
                            '50%': { opacity: '0.8' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* BASE & UTILS */
        body { background-color: #030303; color: #E5E5E5; overflow-x: hidden; }
        
        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #030303; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #FF2A2A; }

        /* GLASSMORPHISM */
        .glass-panel {
            background: rgba(13, 13, 13, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* CARD HOVER EFFECT 3D */
        .module-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            background: #090909;
            text-decoration: none; /* For links */
            position: relative;
        }
        .module-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: rgba(255, 42, 42, 0.4);
            box-shadow: 0 0 30px rgba(255, 42, 42, 0.15);
            background: #0D0D0D;
        }
        .module-card::after {
            content: ''; position: absolute; inset: 0;
            background: radial-gradient(800px circle at var(--mouse-x) var(--mouse-y), rgba(255,255,255,0.06), transparent 40%);
            opacity: 0; transition: opacity 0.5s; pointer-events: none; border-radius: inherit;
        }
        .module-card:hover::after { opacity: 1; }

        /* INPUT ANIMATION */
        .input-group input:focus ~ label,
        .input-group input:not(:placeholder-shown) ~ label,
        .input-group select:focus ~ label,
        .input-group select:valid ~ label {
            transform: translateY(-24px) scale(0.85);
            color: #FF2A2A;
        }

        /* TOAST NOTIFICATION */
        .toast {
            transform: translateX(120%);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .toast.show { transform: translateX(0); }

        /* AVATAR SELECTOR */
        .avatar-option.selected {
            border-color: #FF2A2A;
            background-color: rgba(255, 42, 42, 0.1);
            color: white;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col relative selection:bg-brand selection:text-white">

    <!-- FONDO AMBIENTAL -->
    <div class="fixed inset-0 z-0 pointer-events-none">
        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[80vh] bg-mesh opacity-60"></div>
        <div class="absolute bottom-0 right-0 w-[500px] h-[500px] bg-brand-glow blur-[120px] rounded-full opacity-10"></div>
    </div>

    <!-- LOADER INICIAL -->
    <div id="app-loader" class="fixed inset-0 z-[60] bg-black flex flex-col items-center justify-center transition-opacity duration-500">
        <i class="ph-duotone ph-planet text-brand text-6xl animate-pulse"></i>
        <div class="mt-4 w-32 h-1 bg-zinc-800 rounded-full overflow-hidden">
            <div class="h-full bg-brand animate-[loading_1s_ease-in-out_infinite] w-1/2"></div>
        </div>
        <style> @keyframes loading { 0% { transform: translateX(-100%); } 100% { transform: translateX(200%); } } </style>
    </div>

    <!-- TOAST CONTAINER -->
    <div id="toast-container" class="fixed top-6 right-6 z-[70] flex flex-col gap-3 pointer-events-none"></div>

    <!-- NAVBAR -->
    <nav id="navbar" class="hidden fixed top-0 w-full z-40 border-b border-border bg-bg-glass backdrop-blur-md px-6 py-3 flex justify-between items-center transition-all duration-300">
        <div class="flex items-center gap-3">
            <!-- Icono Navbar Din谩mico -->
            <i id="nav-user-icon" class="ph-duotone ph-planet text-brand text-2xl"></i>
            <span class="font-bold tracking-tight text-lg">GOD'S PLAN</span>
        </div>
        <div class="flex items-center gap-4">
            <div class="hidden md:flex flex-col items-end mr-2">
                <span id="nav-time" class="text-xs font-mono text-white">00:00:00</span>
                <span id="nav-date" class="text-[10px] text-zinc-500 uppercase tracking-wider">LOADING...</span>
            </div>
            <div class="h-8 w-[1px] bg-white/10 hidden md:block"></div>
            <button onclick="window.app.logout()" class="group flex items-center gap-2 text-xs font-bold text-zinc-400 hover:text-white transition-colors">
                LOGOUT <i class="ph-bold ph-sign-out text-lg group-hover:text-brand transition-colors"></i>
            </button>
        </div>
    </nav>

    <main class="flex-grow flex flex-col items-center justify-center relative z-10 w-full p-4">

        <!-- ==================== LOGIN VIEW ==================== -->
        <section id="view-auth" class="hidden w-full max-w-[400px] animate-fade-in-up">
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-zinc-800 to-black border border-white/10 mb-4 shadow-lg shadow-brand/10">
                    <i class="ph-fill ph-fingerprint text-3xl text-brand"></i>
                </div>
                <h1 class="text-3xl font-bold text-white tracking-tight">Access Control</h1>
                <p class="text-zinc-500 text-sm mt-1 font-mono">SECURE ENVIRONMENT // BLQA</p>
            </div>

            <div class="glass-panel p-8 rounded-2xl">
                <form onsubmit="event.preventDefault(); window.app.handleAuth();" class="flex flex-col gap-6">
                    
                    <!-- Input Din谩mico: Nombre (Solo registro) -->
                    <div id="field-name-container" class="hidden relative input-group group">
                        <input type="text" id="input-name" class="w-full bg-black/40 border border-border focus:border-brand rounded-lg px-4 py-3 outline-none transition-all placeholder-transparent" placeholder="Name" autocomplete="name">
                        <label for="input-name" class="absolute left-4 top-3 text-zinc-500 text-sm transition-all pointer-events-none bg-transparent px-1">Nombre Operativo</label>
                        <i class="ph-bold ph-user absolute right-4 top-3.5 text-zinc-600"></i>
                    </div>

                    <!-- Email -->
                    <div class="relative input-group group">
                        <input type="text" id="input-email" class="w-full bg-black/40 border border-border focus:border-brand rounded-lg px-4 py-3 outline-none transition-all placeholder-transparent" placeholder="Email" autocomplete="username">
                        <label for="input-email" class="absolute left-4 top-3 text-zinc-500 text-sm transition-all pointer-events-none bg-transparent px-1">ID / Email</label>
                        <i class="ph-bold ph-envelope-simple absolute right-4 top-3.5 text-zinc-600"></i>
                    </div>

                    <!-- Password -->
                    <div class="relative input-group group">
                        <input type="password" id="input-pass" class="w-full bg-black/40 border border-border focus:border-brand rounded-lg px-4 py-3 outline-none transition-all placeholder-transparent" placeholder="Password" autocomplete="current-password">
                        <label for="input-pass" class="absolute left-4 top-3 text-zinc-500 text-sm transition-all pointer-events-none bg-transparent px-1">Contrase帽a</label>
                        <i class="ph-bold ph-lock-key absolute right-4 top-3.5 text-zinc-600"></i>
                    </div>

                    <button type="submit" id="btn-submit" class="relative overflow-hidden w-full bg-white text-black font-bold py-3.5 rounded-lg hover:bg-zinc-200 transition-all active:scale-[0.98] mt-2 flex items-center justify-center gap-2">
                        <span id="btn-text">INICIAR SISTEMA</span>
                        <i id="btn-icon" class="ph-bold ph-arrow-right"></i>
                        <div id="btn-loader" class="hidden w-5 h-5 border-2 border-black/30 border-t-black rounded-full animate-spin"></div>
                    </button>
                </form>

                <div class="mt-6 pt-6 border-t border-white/5 space-y-4">
                    <button onclick="window.app.loginGoogle()" class="w-full py-3 bg-zinc-900 hover:bg-zinc-800 border border-border rounded-lg transition-all flex items-center justify-center gap-3 text-sm font-medium text-zinc-300 group">
                        <i class="ph-bold ph-google-logo text-lg group-hover:text-white transition-colors"></i> 
                        Acceder con Google
                    </button>
                    
                    <button onclick="window.app.loginGuest()" class="w-full py-3 bg-transparent hover:bg-white/5 border border-white/10 hover:border-white/20 rounded-lg transition-all flex items-center justify-center gap-3 text-sm font-medium text-zinc-400 hover:text-white group">
                        <i class="ph-bold ph-user-circle text-lg group-hover:text-brand transition-colors"></i> 
                        Entrar como Invitado
                    </button>

                    <p class="text-center text-xs text-zinc-500">
                        <span id="auth-switch-label">驴Sin credenciales?</span>
                        <button onclick="window.app.toggleMode()" class="text-white hover:text-brand font-bold ml-1 transition-colors underline decoration-transparent hover:decoration-brand">
                            <span id="auth-switch-action">Solicitar Acceso</span>
                        </button>
                    </p>
                </div>
            </div>
        </section>


        <!-- ==================== DASHBOARD VIEW ==================== -->
        <section id="view-dashboard" class="hidden w-full max-w-6xl mt-16 md:mt-24 px-4 pb-20 animate-fade-in-up">
            
            <!-- 1. HEADER (Minimalista) -->
            <header class="mb-10 text-center md:text-left">
                <div class="flex items-center justify-center md:justify-start gap-2 text-brand font-mono text-xs mb-3">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-brand"></span>
                    </span>
                    SYSTEM ONLINE
                </div>
                <h1 class="text-4xl md:text-5xl font-black text-white leading-none tracking-tighter mb-2">
                    HOLA, <span id="user-name" class="text-transparent bg-clip-text bg-gradient-to-r from-white to-zinc-500">USER</span>
                </h1>
                <p id="greeting-msg" class="text-zinc-500 font-light text-lg">Panel de control operativo.</p>
            </header>

            <!-- 2. GRID DE MDULOS -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">

                <!-- MDULO 1: ADHERENCIA -->
                <a href="https://godsplan.site/adherencia" target="_blank" class="module-card border border-zinc-800 rounded-2xl p-6 cursor-pointer overflow-hidden group min-h-[220px] flex flex-col justify-between block">
                    <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity transform group-hover:scale-110 duration-500">
                        <i class="ph-fill ph-chart-line-up text-8xl text-white"></i>
                    </div>
                    <div class="flex justify-between items-start z-10">
                        <div class="bg-brand/10 p-2.5 rounded-xl text-brand border border-brand/20 group-hover:bg-brand group-hover:text-white transition-colors">
                            <i class="ph-bold ph-briefcase text-2xl"></i>
                        </div>
                        <i class="ph-bold ph-arrow-up-right text-zinc-600 group-hover:text-white transition-colors"></i>
                    </div>
                    <div class="z-10 mt-4">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-brand transition-colors">Adherencia</h3>
                        <p class="text-zinc-500 text-xs leading-relaxed">Control de horas trabajadas, asistencia y flujo tiempos.</p>
                    </div>
                </a>

                <!-- MDULO 2: FINANZAS -->
                <a href="https://godsplan.site/finanzas" target="_blank" class="module-card border border-zinc-800 rounded-2xl p-6 cursor-pointer overflow-hidden group min-h-[220px] flex flex-col justify-between block">
                    <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity transform group-hover:scale-110 duration-500">
                        <i class="ph-fill ph-currency-dollar text-8xl text-white"></i>
                    </div>
                    <div class="flex justify-between items-start z-10">
                        <div class="bg-green-500/10 p-2.5 rounded-xl text-green-500 border border-green-500/20 group-hover:bg-green-500 group-hover:text-white transition-colors">
                            <i class="ph-bold ph-wallet text-2xl"></i>
                        </div>
                        <i class="ph-bold ph-arrow-up-right text-zinc-600 group-hover:text-white transition-colors"></i>
                    </div>
                    <div class="z-10 mt-4">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-green-500 transition-colors">Finanzas</h3>
                        <p class="text-zinc-500 text-xs leading-relaxed">Gesti贸n de recursos y movimientos.</p>
                    </div>
                </a>

                 <!-- MDULO 3: TICKETS -->
                 <a href="https://godsplan.site/tickets" target="_blank" class="module-card border border-zinc-800 rounded-2xl p-6 cursor-pointer overflow-hidden group min-h-[220px] flex flex-col justify-between block relative">
                    <div class="absolute top-4 right-4 bg-yellow-500/20 text-yellow-500 text-[10px] font-bold px-2 py-1 rounded border border-yellow-500/30 z-20">
                        EN DESARROLLO
                    </div>
                    
                    <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity transform group-hover:scale-110 duration-500">
                        <i class="ph-fill ph-ticket text-8xl text-white"></i>
                    </div>
                    <div class="flex justify-between items-start z-10">
                        <div class="bg-yellow-500/10 p-2.5 rounded-xl text-yellow-500 border border-yellow-500/20 group-hover:bg-yellow-500 group-hover:text-black transition-colors">
                            <i class="ph-bold ph-ticket text-2xl"></i>
                        </div>
                    </div>
                    <div class="z-10 mt-4">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-yellow-500 transition-colors">Tickets</h3>
                        <p class="text-zinc-500 text-xs leading-relaxed">Soporte, incidencias y seguimiento.</p>
                    </div>
                </a>

                <!-- MDULO 4: CANVAS (NUEVO) -->
                <a href="https://canvas.godsplan.site" target="_blank" class="module-card border border-zinc-800 rounded-2xl p-6 cursor-pointer overflow-hidden group min-h-[220px] flex flex-col justify-between block">
                    <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity transform group-hover:scale-110 duration-500">
                        <i class="ph-fill ph-terminal-window text-8xl text-white"></i>
                    </div>
                    <div class="flex justify-between items-start z-10">
                        <div class="bg-orange-500/10 p-2.5 rounded-xl text-orange-500 border border-orange-500/20 group-hover:bg-orange-500 group-hover:text-white transition-colors">
                            <i class="ph-bold ph-code text-2xl"></i>
                        </div>
                        <i class="ph-bold ph-arrow-up-right text-zinc-600 group-hover:text-white transition-colors"></i>
                    </div>
                    <div class="z-10 mt-4">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-orange-500 transition-colors">Canvas</h3>
                        <p class="text-zinc-500 text-xs leading-relaxed">Editor HTML en tiempo real con consola integrada.</p>
                    </div>
                </a>

                <!-- MDULO 5: MI CUENTA (AJUSTES) -->
                <button onclick="window.app.goToSettings()" class="module-card border border-zinc-800 rounded-2xl p-6 cursor-pointer overflow-hidden group min-h-[220px] flex flex-col justify-between block text-left w-full">
                    <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity transform group-hover:scale-110 duration-500">
                        <i class="ph-fill ph-user-gear text-8xl text-white"></i>
                    </div>
                    <div class="flex justify-between items-start z-10">
                        <div class="bg-zinc-700/20 p-2.5 rounded-xl text-zinc-300 border border-zinc-600/20 group-hover:bg-zinc-200 group-hover:text-black transition-colors">
                            <i class="ph-bold ph-gear text-2xl"></i>
                        </div>
                        <i class="ph-bold ph-caret-right text-zinc-600 group-hover:text-white transition-colors"></i>
                    </div>
                    <div class="z-10 mt-4">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-zinc-300 transition-colors">Mi Cuenta</h3>
                        <p class="text-zinc-500 text-xs leading-relaxed">Personalizaci贸n, avatar y seguridad.</p>
                    </div>
                </button>

                <!-- MDULO 6: SISTEMA (INFO) -->
                <button onclick="window.app.goToInfo()" class="module-card border border-zinc-800 rounded-2xl p-6 cursor-pointer overflow-hidden group min-h-[220px] flex flex-col justify-between block text-left w-full">
                    <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity transform group-hover:scale-110 duration-500">
                        <i class="ph-fill ph-cpu text-8xl text-white"></i>
                    </div>
                    <div class="flex justify-between items-start z-10">
                        <div class="bg-cyan-500/10 p-2.5 rounded-xl text-cyan-500 border border-cyan-500/20 group-hover:bg-cyan-500 group-hover:text-black transition-colors">
                            <i class="ph-bold ph-info text-2xl"></i>
                        </div>
                        <i class="ph-bold ph-caret-right text-zinc-600 group-hover:text-white transition-colors"></i>
                    </div>
                    <div class="z-10 mt-4">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-cyan-500 transition-colors">Sistema</h3>
                        <p class="text-zinc-500 text-xs leading-relaxed">Estado, diagn贸stico y versi贸n de la app.</p>
                    </div>
                </button>

            </div>

            <!-- 3. NUEVA SECCIN: HISTORIA & AUTOR -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12 animate-fade-in-up" style="animation-delay: 0.1s;">
                <!-- Columna Izquierda: Manifiesto God's Plan -->
                <div class="glass-panel p-8 rounded-2xl relative overflow-hidden group">
                     <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity">
                        <i class="ph-fill ph-scroll text-9xl text-white"></i>
                    </div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white">
                                <i class="ph-bold ph-planet text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white">El Origen</h3>
                        </div>
                        <p class="text-zinc-400 text-sm leading-relaxed mb-4">
                            <strong class="text-brand">GOD'S PLAN</strong> no es solo software, es un sistema operativo para la vida. Naci贸 de la necesidad de unificar el caos de la existencia digital en un solo n煤cleo coherente.
                        </p>
                        <p class="text-zinc-500 text-sm leading-relaxed">
                            Su enfoque es minimalista y directo: eliminar la fricci贸n entre la intenci贸n y la acci贸n. Desde la gesti贸n financiera hasta la codificaci贸n en tiempo real, cada m贸dulo est谩 dise帽ado para potenciar la disciplina y la claridad mental del usuario. Es la arquitectura del orden personal.
                        </p>
                    </div>
                </div>

                <!-- Columna Derecha: Sobre el Autor -->
                <div class="glass-panel p-8 rounded-2xl relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-6 opacity-5 group-hover:opacity-10 transition-opacity">
                        <i class="ph-fill ph-code-block text-9xl text-white"></i>
                    </div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-10 h-10 rounded-full bg-white/5 border border-white/10 flex items-center justify-center text-white">
                                <i class="ph-bold ph-fingerprint text-xl"></i>
                            </div>
                            <h3 class="text-xl font-bold text-white">El Autor</h3>
                        </div>
                        <p class="text-zinc-400 text-sm leading-relaxed mb-4">
                            Desarrollado con precisi贸n quir煤rgica por un arquitecto de realidades digitales.
                        </p>
                        <ul class="space-y-3 mt-4">
                            <li class="flex items-start gap-3 text-sm text-zinc-500">
                                <i class="ph-fill ph-check-circle text-brand mt-0.5"></i>
                                <span>Visionario enfocado en la simbiosis entre humano y tecnolog铆a.</span>
                            </li>
                            <li class="flex items-start gap-3 text-sm text-zinc-500">
                                <i class="ph-fill ph-check-circle text-brand mt-0.5"></i>
                                <span>Creador de herramientas que no solo funcionan, sino que inspiran.</span>
                            </li>
                            <li class="flex items-start gap-3 text-sm text-zinc-500">
                                <i class="ph-fill ph-check-circle text-brand mt-0.5"></i>
                                <span>Comprometido con la mejora continua y el c贸digo limpio.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- FOOTER -->
            <footer class="mt-8 pt-8 border-t border-white/5 flex flex-col md:flex-row justify-between items-center text-xs text-zinc-600 font-mono">
                <div>
                    <span class="text-white font-bold">GOD'S PLAN</span> // PERSONAL OS
                </div>
                <div class="mt-4 md:mt-0 flex gap-6">
                    <span class="text-green-500 flex items-center gap-2 pl-6 ml-2"><div class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></div> SERVER STABLE</span>
                </div>
            </footer>
        </section>

        <!-- ==================== SETTINGS VIEW ==================== -->
        <section id="view-settings" class="hidden w-full max-w-2xl mt-16 md:mt-24 px-4 pb-20 animate-fade-in-up">
            
            <!-- Header Settings -->
            <div class="flex items-center gap-4 mb-8">
                <button onclick="window.app.returnToDash()" class="w-10 h-10 rounded-full border border-zinc-800 hover:bg-zinc-800 flex items-center justify-center text-zinc-400 hover:text-white transition-colors">
                    <i class="ph-bold ph-arrow-left text-lg"></i>
                </button>
                <div>
                    <h2 class="text-2xl font-bold text-white">Configuraci贸n</h2>
                    <p class="text-zinc-500 text-sm">Gestiona tu identidad y seguridad.</p>
                </div>
            </div>

            <div class="space-y-6">

                <!-- Avatar Selection -->
                <div class="glass-panel p-6 rounded-2xl">
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <i class="ph-bold ph-smiley text-brand"></i> Avatar de Usuario
                    </h3>
                    <p class="text-xs text-zinc-500 mb-4">Selecciona un icono para representarte en el sistema.</p>
                    
                    <div class="grid grid-cols-4 md:grid-cols-6 gap-3" id="avatar-grid">
                        <!-- Generado por JS -->
                    </div>
                </div>

                <!-- Info Read Only -->
                <div class="glass-panel p-6 rounded-2xl border border-zinc-800/50">
                    <div class="flex items-start gap-4">
                        <div class="w-14 h-14 rounded-full bg-brand/10 border border-brand/20 flex items-center justify-center text-brand">
                            <i id="settings-current-avatar" class="ph-duotone ph-user-circle text-3xl"></i>
                        </div>
                        <div class="flex-grow">
                            <label class="block text-xs uppercase tracking-wider text-zinc-500 mb-1">ID de Usuario</label>
                            <div id="settings-email" class="text-white font-mono text-sm break-all mb-2">cargando...</div>
                            <div class="inline-flex items-center px-2 py-1 rounded bg-zinc-900 border border-zinc-800 text-[10px] text-zinc-400">
                                <i class="ph-fill ph-shield-check mr-1 text-green-500"></i> CUENTA SEGURA
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actualizar Perfil -->
                <div class="glass-panel p-6 rounded-2xl">
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <i class="ph-bold ph-identification-card text-brand"></i> Perfil P煤blico
                    </h3>
                    <div class="space-y-4">
                        <div class="relative input-group group">
                            <input type="text" id="settings-name" class="w-full bg-black/40 border border-border focus:border-brand rounded-lg px-4 py-3 outline-none transition-all placeholder-transparent" placeholder="Nuevo Nombre">
                            <label for="settings-name" class="absolute left-4 top-3 text-zinc-500 text-sm transition-all pointer-events-none bg-transparent px-1">Nombre para mostrar</label>
                        </div>
                        <div class="flex justify-end">
                            <button onclick="window.app.updateUserData()" class="px-6 py-2 bg-white text-black text-sm font-bold rounded-lg hover:bg-zinc-200 transition-colors">
                                Guardar Cambios
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Seguridad -->
                <div class="glass-panel p-6 rounded-2xl">
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <i class="ph-bold ph-lock-key text-brand"></i> Seguridad
                    </h3>
                    <div class="space-y-4">
                        <p class="text-xs text-zinc-500 bg-zinc-900/50 p-3 rounded border border-white/5">
                            <i class="ph-fill ph-warning-circle text-yellow-500 mr-1"></i>
                            Por seguridad, es posible que debas volver a iniciar sesi贸n si cambias tu contrase帽a.
                        </p>
                        <div class="relative input-group group">
                            <input type="password" id="settings-new-pass" class="w-full bg-black/40 border border-border focus:border-brand rounded-lg px-4 py-3 outline-none transition-all placeholder-transparent" placeholder="Nueva Contrase帽a">
                            <label for="settings-new-pass" class="absolute left-4 top-3 text-zinc-500 text-sm transition-all pointer-events-none bg-transparent px-1">Nueva Contrase帽a</label>
                        </div>
                        <div class="flex justify-end">
                            <button onclick="window.app.updateUserPassword()" class="px-6 py-2 bg-zinc-800 text-white text-sm font-bold rounded-lg hover:bg-brand hover:text-white border border-zinc-700 hover:border-brand transition-colors">
                                Actualizar Clave
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- ==================== SYSTEM INFO VIEW ==================== -->
        <section id="view-info" class="hidden w-full max-w-3xl mt-16 md:mt-24 px-4 pb-20 animate-fade-in-up">
            
            <div class="flex items-center gap-4 mb-8">
                <button onclick="window.app.returnToDash()" class="w-10 h-10 rounded-full border border-zinc-800 hover:bg-zinc-800 flex items-center justify-center text-zinc-400 hover:text-white transition-colors">
                    <i class="ph-bold ph-arrow-left text-lg"></i>
                </button>
                <div>
                    <h2 class="text-2xl font-bold text-white">Estado del Sistema</h2>
                    <p class="text-zinc-500 text-sm">Diagn贸stico y especificaciones.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <!-- Main Status -->
                <div class="glass-panel p-8 rounded-2xl md:col-span-2 flex flex-col items-center justify-center text-center">
                    <div class="w-24 h-24 rounded-full bg-zinc-900 border border-zinc-800 flex items-center justify-center mb-4 shadow-2xl shadow-brand/10">
                        <i class="ph-duotone ph-cpu text-5xl text-brand animate-pulse-glow"></i>
                    </div>
                    <h3 class="text-3xl font-bold text-white mb-2">GOD'S PLAN</h3>
                    <div class="flex items-center gap-2 text-zinc-500 text-sm font-mono">
                        <span>v2.2.0</span>
                        <span class="w-1 h-1 rounded-full bg-zinc-700"></span>
                        <span>Stable</span>
                    </div>
                </div>

                <!-- Stats -->
                <div class="glass-panel p-6 rounded-2xl">
                    <h4 class="text-sm font-bold text-white mb-4 uppercase tracking-wider flex items-center gap-2">
                        <i class="ph-fill ph-memory text-zinc-400"></i> Memoria
                    </h4>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between text-xs text-zinc-400 mb-1">
                                <span>USO HEAP</span>
                                <span>34%</span>
                            </div>
                            <div class="w-full h-1.5 bg-zinc-800 rounded-full overflow-hidden">
                                <div class="h-full bg-brand w-[34%]"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between text-xs text-zinc-400 mb-1">
                                <span>CACHE</span>
                                <span>12%</span>
                            </div>
                            <div class="w-full h-1.5 bg-zinc-800 rounded-full overflow-hidden">
                                <div class="h-full bg-white w-[12%]"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Network -->
                <div class="glass-panel p-6 rounded-2xl">
                    <h4 class="text-sm font-bold text-white mb-4 uppercase tracking-wider flex items-center gap-2">
                        <i class="ph-fill ph-globe text-zinc-400"></i> Conectividad
                    </h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-zinc-900/50 p-3 rounded-lg border border-white/5">
                            <div class="text-[10px] text-zinc-500 uppercase">Estado</div>
                            <div class="text-green-500 font-bold flex items-center gap-1.5">
                                <span class="w-1.5 h-1.5 rounded-full bg-green-500"></span> ONLINE
                            </div>
                        </div>
                        <div class="bg-zinc-900/50 p-3 rounded-lg border border-white/5">
                            <div class="text-[10px] text-zinc-500 uppercase">Ping</div>
                            <div class="text-white font-mono">24ms</div>
                        </div>
                        <div class="bg-zinc-900/50 p-3 rounded-lg border border-white/5 col-span-2">
                            <div class="text-[10px] text-zinc-500 uppercase mb-1">Protocolo</div>
                            <div class="text-zinc-300 text-xs font-mono">HTTPS / FIREBASE FIRESTORE</div>
                        </div>
                    </div>
                </div>

                <!-- Credits -->
                <div class="glass-panel p-6 rounded-2xl md:col-span-2">
                    <div class="flex items-center gap-4">
                        <i class="ph-fill ph-code text-2xl text-zinc-600"></i>
                        <div>
                            <h4 class="text-white font-bold text-sm">Desarrollo</h4>
                            <p class="text-zinc-500 text-xs">Arquitectura basada en TailwindCSS & Firebase.</p>
                        </div>
                        <div class="ml-auto">
                            <a href="#" class="text-brand text-xs hover:underline">Ver Documentaci贸n</a>
                        </div>
                    </div>
                </div>

            </div>
        </section>

    </main>

    <!-- LOGICA DE LA APP -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            signInWithEmailAndPassword, 
            createUserWithEmailAndPassword,
            signInWithPopup,
            signInAnonymously,
            GoogleAuthProvider,
            updateProfile,
            updatePassword, 
            onAuthStateChanged, 
            signOut,
            setPersistence,
            browserLocalPersistence
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        
        // IMPORTAR FIRESTORE (Base de datos) - Aunque ya no se use para finanzas, se deja por si acaso
        import { 
            getFirestore
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // CONFIGURACIN FIREBASE
        const firebaseConfig = {
            apiKey: "AIzaSyD0lX3XmVPQHNNxpsZS82YzDMzM6MLhq3g",
            authDomain: "godsplan-blqa.firebaseapp.com",
            projectId: "godsplan-blqa",
            storageBucket: "godsplan-blqa.firebasestorage.app",
            messagingSenderId: "1008783768310",
            appId: "1:1008783768310:web:c09fe541a2f4d23e5b8ad7"
        };

        // INICIALIZACIN
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        // Persistencia local
        setPersistence(auth, browserLocalPersistence).catch(console.error);

        // CLASE PRINCIPAL DE LA UI
        class UIManager {
            constructor() {
                this.views = {
                    auth: document.getElementById('view-auth'),
                    dash: document.getElementById('view-dashboard'),
                    settings: document.getElementById('view-settings'),
                    info: document.getElementById('view-info'),
                    nav: document.getElementById('navbar'),
                    loader: document.getElementById('app-loader')
                };
                this.isRegisterMode = false;
                this.availableAvatars = [
                    'ph-user-circle', 'ph-robot', 'ph-alien', 'ph-skull', 
                    'ph-crown', 'ph-ghost', 'ph-ninja', 'ph-detective'
                ];
                
                this.initClock();
                this.addCardEffects();
                this.renderAvatarGrid();
            }

            // Renderiza la cuadr铆cula de selecci贸n de avatars
            renderAvatarGrid() {
                const grid = document.getElementById('avatar-grid');
                if(!grid) return;
                grid.innerHTML = '';
                this.availableAvatars.forEach(icon => {
                    const btn = document.createElement('button');
                    btn.className = 'avatar-option w-12 h-12 rounded-xl border border-zinc-800 bg-zinc-900 flex items-center justify-center text-zinc-400 hover:text-white hover:border-brand/50 transition-all';
                    btn.innerHTML = `<i class="ph-fill ${icon} text-2xl"></i>`;
                    btn.onclick = () => this.selectAvatar(icon, btn);
                    grid.appendChild(btn);
                });
            }

            selectAvatar(iconClass, btnElement) {
                document.querySelectorAll('.avatar-option').forEach(b => b.classList.remove('selected'));
                btnElement.classList.add('selected');
                const preview = document.getElementById('settings-current-avatar');
                preview.className = `ph-duotone ${iconClass} text-3xl`;
                window.app.updateUserAvatar(iconClass);
            }

            // Muestra una notificaci贸n Toast
            toast(msg, type = 'default') {
                const container = document.getElementById('toast-container');
                const el = document.createElement('div');
                
                const colors = {
                    error: 'border-red-500 text-red-100 bg-red-900/90',
                    success: 'border-green-500 text-green-100 bg-green-900/90',
                    warning: 'border-yellow-500 text-yellow-100 bg-yellow-900/90',
                    info: 'border-blue-500 text-blue-100 bg-blue-900/90',
                    default: 'border-zinc-700 text-white bg-zinc-900/90'
                };
                
                const iconMap = {
                    error: 'ph-warning-circle',
                    success: 'ph-check-circle',
                    warning: 'ph-warning',
                    info: 'ph-info',
                    default: 'ph-bell'
                };

                el.className = `toast pointer-events-auto flex items-center gap-3 min-w-[300px] p-4 rounded-lg border backdrop-blur-md shadow-2xl ${colors[type] || colors.default}`;
                el.innerHTML = `
                    <i class="ph-fill ${iconMap[type] || iconMap.default} text-xl"></i>
                    <div class="text-sm font-medium">${msg}</div>
                `;

                container.appendChild(el);
                requestAnimationFrame(() => el.classList.add('show'));
                setTimeout(() => {
                    el.classList.remove('show');
                    setTimeout(() => el.remove(), 400);
                }, 4000);
            }

            setLoading(loading) {
                const btnText = document.getElementById('btn-text');
                const btnIcon = document.getElementById('btn-icon');
                const btnLoader = document.getElementById('btn-loader');
                const btn = document.getElementById('btn-submit');

                if (loading) {
                    btnText.textContent = "PROCESANDO...";
                    btnIcon.classList.add('hidden');
                    btnLoader.classList.remove('hidden');
                    btn.disabled = true;
                    btn.classList.add('opacity-70', 'cursor-not-allowed');
                } else {
                    btnText.textContent = this.isRegisterMode ? "CREAR CUENTA" : "INICIAR SISTEMA";
                    btnIcon.classList.remove('hidden');
                    btnLoader.classList.add('hidden');
                    btn.disabled = false;
                    btn.classList.remove('opacity-70', 'cursor-not-allowed');
                }
            }

            toggleView(viewName) {
                this.views.loader.classList.add('opacity-0', 'pointer-events-none');
                
                // Ocultar todo
                Object.values(this.views).forEach(el => {
                    if(el && el.id !== 'app-loader' && el.id !== 'navbar') el.classList.add('hidden');
                });
                this.views.nav.classList.add('hidden', '-translate-y-full');

                if (viewName === 'dashboard') {
                    this.views.dash.classList.remove('hidden');
                    this.views.nav.classList.remove('hidden', '-translate-y-full');
                    this.updateGreeting();
                } else if (viewName === 'auth') {
                    this.views.auth.classList.remove('hidden');
                } else if (viewName === 'settings') {
                    this.views.settings.classList.remove('hidden');
                    this.views.nav.classList.remove('hidden', '-translate-y-full');
                } else if (viewName === 'info') {
                    this.views.info.classList.remove('hidden');
                    this.views.nav.classList.remove('hidden', '-translate-y-full');
                }
            }

            updateGreeting() {
                const hour = new Date().getHours();
                let text = "Buenas noches";
                if (hour >= 5 && hour < 12) text = "Buenos d铆as";
                else if (hour >= 12 && hour < 20) text = "Buenas tardes";
                
                const el = document.getElementById('greeting-msg');
                if(el) el.textContent = `${text}. El sistema est谩 listo para operar.`;
            }

            initClock() {
                const update = () => {
                    const now = new Date();
                    document.getElementById('nav-time').textContent = now.toLocaleTimeString('es-ES', { hour12: false });
                    document.getElementById('nav-date').textContent = now.toLocaleDateString('es-ES', { weekday: 'short', day: 'numeric', month: 'short' });
                };
                setInterval(update, 1000);
                update();
            }

            addCardEffects() {
                // Se re-aplica el efecto al cargar o cambiar vistas
                const apply = () => {
                    document.querySelectorAll('.module-card, .glass-panel').forEach(card => {
                        card.onmousemove = e => {
                            const rect = card.getBoundingClientRect();
                            const x = e.clientX - rect.left;
                            const y = e.clientY - rect.top;
                            card.style.setProperty('--mouse-x', `${x}px`);
                            card.style.setProperty('--mouse-y', `${y}px`);
                        }
                    });
                };
                apply();
                // Observador por si se agregan elementos din谩micamente
                setTimeout(apply, 1000); 
            }
        }

        const ui = new UIManager();

        // CONTROLADOR GLOBAL
        window.app = {
            
            toggleMode: () => {
                ui.isRegisterMode = !ui.isRegisterMode;
                const nameField = document.getElementById('field-name-container');
                const title = document.querySelector('#view-auth h1');
                const switchLabel = document.getElementById('auth-switch-label');
                const switchAction = document.getElementById('auth-switch-action');
                const btnText = document.getElementById('btn-text');

                if (ui.isRegisterMode) {
                    nameField.classList.remove('hidden');
                    title.textContent = "New Registration";
                    switchLabel.textContent = "驴Ya tienes acceso?";
                    switchAction.textContent = "Iniciar Sesi贸n";
                    btnText.textContent = "CREAR CUENTA";
                } else {
                    nameField.classList.add('hidden');
                    title.textContent = "Access Control";
                    switchLabel.textContent = "驴Sin credenciales?";
                    switchAction.textContent = "Solicitar Acceso";
                    btnText.textContent = "INICIAR SISTEMA";
                }
            },

            handleAuth: async () => {
                const email = document.getElementById('input-email').value;
                const pass = document.getElementById('input-pass').value;
                const name = document.getElementById('input-name').value;

                if (!email || !pass) {
                    ui.toast("Por favor completa todos los campos", "warning");
                    return;
                }

                const finalEmail = email.includes('@') ? email : `${email}@godsplan.site`;
                ui.setLoading(true);

                try {
                    if (ui.isRegisterMode) {
                        const userCred = await createUserWithEmailAndPassword(auth, finalEmail, pass);
                        await updateProfile(userCred.user, { displayName: name || "User", photoURL: 'ph-robot' });
                        ui.toast(`Bienvenido al sistema, ${name}`, "success");
                    } else {
                        await signInWithEmailAndPassword(auth, finalEmail, pass);
                        ui.toast("Credenciales verificadas. Acceso concedido.", "success");
                    }
                } catch (error) {
                    console.error(error);
                    let msg = "Error desconocido";
                    if (error.code === 'auth/invalid-credential' || error.code === 'auth/wrong-password') msg = "Usuario no registrado o contrase帽a incorrecta.";
                    else if (error.code === 'auth/user-not-found') msg = "Usuario no encontrado. Prueba registrarte.";
                    else if (error.code === 'auth/email-already-in-use') msg = "El ID ya est谩 registrado";
                    else if (error.code === 'auth/weak-password') msg = "La contrase帽a es muy d茅bil";
                    
                    ui.toast(msg, "error");
                    ui.setLoading(false);
                }
            },

            loginGoogle: async () => {
                try {
                    await signInWithPopup(auth, new GoogleAuthProvider());
                    ui.toast("Autenticado con Google", "success");
                } catch (error) {
                    ui.toast("Error al conectar con Google", "error");
                }
            },

            loginGuest: async () => {
                try {
                    ui.toast("Accediendo como invitado...", "info");
                    await signInAnonymously(auth);
                    ui.toast("Modo Invitado Activo", "success");
                } catch (error) {
                    console.error(error);
                    ui.toast("Error en modo invitado", "error");
                }
            },

            logout: async () => {
                await signOut(auth);
                ui.toast("Sesi贸n cerrada correctamente", "info");
            },

            // Navigation Wrappers
            goToSettings: () => {
                const user = auth.currentUser;
                if (!user) return;
                
                document.getElementById('settings-email').textContent = user.email || "Invitado";
                document.getElementById('settings-name').value = user.displayName || "";
                
                const currentAvatar = user.photoURL || 'ph-user-circle';
                document.getElementById('settings-current-avatar').className = `ph-duotone ${currentAvatar} text-3xl`;
                
                document.querySelectorAll('.avatar-option').forEach(btn => {
                    if(btn.innerHTML.includes(currentAvatar)) btn.classList.add('selected');
                    else btn.classList.remove('selected');
                });

                ui.toggleView('settings');
            },

            goToInfo: () => ui.toggleView('info'),
            returnToDash: () => ui.toggleView('dashboard'),
            toggleView: (v) => ui.toggleView(v),
            
            updateUserData: async () => {
                const newName = document.getElementById('settings-name').value;
                const user = auth.currentUser;
                if (!user) return;
                if (!newName) return ui.toast("El nombre no puede estar vac铆o", "warning");

                try {
                    ui.toast("Actualizando perfil...", "default");
                    await updateProfile(user, { displayName: newName });
                    document.getElementById('user-name').textContent = newName.toUpperCase();
                    ui.toast("Perfil actualizado correctamente", "success");
                } catch (error) {
                    ui.toast("Error al actualizar perfil", "error");
                }
            },

            updateUserAvatar: async (iconClass) => {
                const user = auth.currentUser;
                if (!user) return;
                try {
                    await updateProfile(user, { photoURL: iconClass });
                    document.getElementById('nav-user-icon').className = `ph-duotone ${iconClass} text-brand text-2xl`;
                    ui.toast("Avatar actualizado", "success");
                } catch (error) {
                    console.error(error);
                }
            },

            updateUserPassword: async () => {
                const newPass = document.getElementById('settings-new-pass').value;
                const user = auth.currentUser;
                if (!user) return;
                if (!newPass || newPass.length < 6) return ui.toast("La contrase帽a debe tener al menos 6 caracteres", "warning");

                try {
                    ui.toast("Actualizando seguridad...", "default");
                    await updatePassword(user, newPass);
                    document.getElementById('settings-new-pass').value = "";
                    ui.toast("Contrase帽a actualizada.", "success");
                } catch (error) {
                    if (error.code === 'auth/requires-recent-login') {
                        ui.toast("Por seguridad, cierra sesi贸n e ingresa de nuevo para cambiar la clave.", "warning");
                    } else {
                        ui.toast("Error al cambiar contrase帽a", "error");
                    }
                }
            }
        };

        // LISTENER DE ESTADO DE AUTENTICACIN
        onAuthStateChanged(auth, (user) => {
            ui.setLoading(false); 
            if (user) {
                const displayName = user.displayName || (user.isAnonymous ? "INVITADO" : user.email.split('@')[0]);
                document.getElementById('user-name').textContent = displayName.toUpperCase();
                
                const avatar = user.photoURL || 'ph-planet';
                document.getElementById('nav-user-icon').className = `ph-duotone ${avatar} text-brand text-2xl`;

                const isAuthView = !document.getElementById('view-auth').classList.contains('hidden');
                if (isAuthView) ui.toggleView('dashboard');
                
            } else {
                ui.toggleView('auth');
            }
        });

    </script>
</body>
</html>
